<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><meta http-equiv=x-ua-compatible content="IE=edge, chrome=1"><title>IDEA本地搭建Pulsar调试环境 - boatrain的博客</title><meta name=Description content="IDEA本地搭建pulsar调试环境"><meta property="og:title" content="IDEA本地搭建Pulsar调试环境"><meta property="og:description" content="IDEA本地搭建pulsar调试环境"><meta property="og:type" content="article"><meta property="og:url" content="https://boatrainlsz.github.io/posts/pulsar_debug_in_ide/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-05-27T21:34:45+08:00"><meta property="article:modified_time" content="2022-05-27T21:34:45+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="IDEA本地搭建Pulsar调试环境"><meta name=twitter:description content="IDEA本地搭建pulsar调试环境"><meta name=application-name content="boatrain的博客"><meta name=apple-mobile-web-app-title content="boatrain的博客"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://boatrainlsz.github.io/posts/pulsar_debug_in_ide/><link rel=prev href=https://boatrainlsz.github.io/posts/pulsar_in_action_ch02/><link rel=stylesheet href=/lib/normalize/normalize.min.css><link rel=stylesheet href=/css/style.min.css><link rel=stylesheet href=/lib/fontawesome-free/all.min.css><link rel=stylesheet href=/lib/animate/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"IDEA本地搭建Pulsar调试环境","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/boatrainlsz.github.io\/posts\/pulsar_debug_in_ide\/"},"genre":"posts","keywords":"LaTex","wordcount":406,"url":"https:\/\/boatrainlsz.github.io\/posts\/pulsar_debug_in_ide\/","datePublished":"2022-05-27T21:34:45+08:00","dateModified":"2022-05-27T21:34:45+08:00","publisher":{"@type":"Organization","name":"boatrain"},"author":{"@type":"Person","name":"boatrain"},"description":"IDEA本地搭建pulsar调试环境"}</script></head><body header-desktop header-mobile><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":''==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:''==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title=boatrain的博客>boatrain的博客</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/>文章 </a><a class=menu-item href=/tags/>标签 </a><a class=menu-item href=/categories/>分类 </a><a class=menu-item href=/search/><i class="fas fa-fw fa-search"></i> 搜索 </a><span class="menu-item delimiter"></span><a href=javascript:void(0); class="menu-item theme-switch" title=切换主题>
<i class="fas fa-adjust fa-fw"></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title=boatrain的博客>boatrain的博客</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><a class=menu-item href=/posts/ title>文章</a><a class=menu-item href=/tags/ title>标签</a><a class=menu-item href=/categories/ title>分类</a><a class=menu-item href=/search/ title><i class="fas fa-fw fa-search"></i>搜索</a><a href=javascript:void(0); class="menu-item theme-switch" title=切换主题>
<i class="fas fa-adjust fa-fw"></i></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>目录</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animated flipInX">IDEA本地搭建Pulsar调试环境</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw"></i>boatrain</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime=2022-05-27>2022-05-27</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;约 406 字&nbsp;
<i class="far fa-clock fa-fw"></i>&nbsp;预计阅读 1 分钟&nbsp;</div></div><div class="details toc" id=toc-static kept><div class="details-summary toc-title"><span>目录</span>
<span><i class="details-icon fas fa-angle-right"></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#部署zookeeper>部署zookeeper</a></li><li><a href=#启动broker>启动broker</a></li></ul></nav></div></div><div class=content id=content><div class="details admonition warning open"><div class="details-summary admonition-title"><i class="icon fas fa-exclamation-triangle fa-fw"></i>警告<i class="details-icon fas fa-angle-right fa-fw"></i></div><div class=details-content><div class=admonition-content>本文的图床是imgur,请自备梯子</div></div></div><h2 id=部署zookeeper>部署zookeeper</h2><p>本地debug部署个单机版的就够了，参考<a href=https://cloud.tencent.com/developer/article/1674688 target=_blank rel="noopener noreffer">此教程</a>。注意在<code>zoo.cfg</code>文件中配置下<code>admin.serverPort</code>，默认是<code>8080</code>端口，<a href=https://www.jianshu.com/p/181a69836fe9 target=_blank rel="noopener noreffer">会和Pulsar Broker的默认HTTP端口冲突</a>，这里改为<code>8888</code>端口，完整配置如下：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=err>#</span> <span class=nx>The</span> <span class=nx>number</span> <span class=k>of</span> <span class=nx>milliseconds</span> <span class=k>of</span> <span class=nx>each</span> <span class=nx>tick</span>
</span></span><span class=line><span class=cl><span class=nx>tickTime</span><span class=o>=</span><span class=mi>2000</span>
</span></span><span class=line><span class=cl><span class=err>#</span> <span class=nx>The</span> <span class=nx>number</span> <span class=k>of</span> <span class=nx>ticks</span> <span class=nx>that</span> <span class=nx>the</span> <span class=nx>initial</span> 
</span></span><span class=line><span class=cl><span class=err>#</span> <span class=nx>synchronization</span> <span class=nx>phase</span> <span class=nx>can</span> <span class=nx>take</span>
</span></span><span class=line><span class=cl><span class=nx>initLimit</span><span class=o>=</span><span class=mi>10</span>
</span></span><span class=line><span class=cl><span class=err>#</span> <span class=nx>The</span> <span class=nx>number</span> <span class=k>of</span> <span class=nx>ticks</span> <span class=nx>that</span> <span class=nx>can</span> <span class=nx>pass</span> <span class=nx>between</span> 
</span></span><span class=line><span class=cl><span class=err>#</span> <span class=nx>sending</span> <span class=nx>a</span> <span class=nx>request</span> <span class=nx>and</span> <span class=nx>getting</span> <span class=nx>an</span> <span class=nx>acknowledgement</span>
</span></span><span class=line><span class=cl><span class=nx>syncLimit</span><span class=o>=</span><span class=mi>5</span>
</span></span><span class=line><span class=cl><span class=err>#</span> <span class=nx>the</span> <span class=nx>directory</span> <span class=nx>where</span> <span class=nx>the</span> <span class=nx>snapshot</span> <span class=nx>is</span> <span class=nx>stored</span><span class=p>.</span>
</span></span><span class=line><span class=cl><span class=err>#</span> <span class=k>do</span> <span class=nx>not</span> <span class=nx>use</span> <span class=o>/</span><span class=nx>tmp</span> <span class=k>for</span> <span class=nx>storage</span><span class=p>,</span> <span class=err>/tmp here is just </span>
</span></span><span class=line><span class=cl><span class=err>#</span> <span class=nx>example</span> <span class=nx>sakes</span><span class=p>.</span>
</span></span><span class=line><span class=cl><span class=nx>dataDir</span><span class=o>=</span><span class=err>/tmp/zookeeper</span>
</span></span><span class=line><span class=cl><span class=err>#</span> <span class=nx>the</span> <span class=nx>port</span> <span class=nx>at</span> <span class=nx>which</span> <span class=nx>the</span> <span class=nx>clients</span> <span class=nx>will</span> <span class=nx>connect</span>
</span></span><span class=line><span class=cl><span class=nx>clientPort</span><span class=o>=</span><span class=mi>2181</span>
</span></span><span class=line><span class=cl><span class=err>#</span> <span class=nx>the</span> <span class=nx>maximum</span> <span class=nx>number</span> <span class=k>of</span> <span class=nx>client</span> <span class=nx>connections</span><span class=p>.</span>
</span></span><span class=line><span class=cl><span class=err>#</span> <span class=nx>increase</span> <span class=k>this</span> <span class=k>if</span> <span class=nx>you</span> <span class=nx>need</span> <span class=nx>to</span> <span class=nx>handle</span> <span class=nx>more</span> <span class=nx>clients</span>
</span></span><span class=line><span class=cl><span class=err>#</span><span class=nx>maxClientCnxns</span><span class=o>=</span><span class=mi>60</span>
</span></span><span class=line><span class=cl><span class=err>#</span>
</span></span><span class=line><span class=cl><span class=err>#</span> <span class=nx>Be</span> <span class=nx>sure</span> <span class=nx>to</span> <span class=nx>read</span> <span class=nx>the</span> <span class=nx>maintenance</span> <span class=nx>section</span> <span class=k>of</span> <span class=nx>the</span> 
</span></span><span class=line><span class=cl><span class=err>#</span> <span class=nx>administrator</span> <span class=nx>guide</span> <span class=nx>before</span> <span class=nx>turning</span> <span class=nx>on</span> <span class=nx>autopurge</span><span class=p>.</span>
</span></span><span class=line><span class=cl><span class=err>#</span>
</span></span><span class=line><span class=cl><span class=err>#</span> <span class=nx>http</span><span class=o>:</span><span class=c1>//zookeeper.apache.org/doc/current/zookeeperAdmin.html#sc_maintenance
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=err>#</span>
</span></span><span class=line><span class=cl><span class=err>#</span> <span class=nx>The</span> <span class=nx>number</span> <span class=k>of</span> <span class=nx>snapshots</span> <span class=nx>to</span> <span class=nx>retain</span> <span class=k>in</span> <span class=nx>dataDir</span>
</span></span><span class=line><span class=cl><span class=err>#</span><span class=nx>autopurge</span><span class=p>.</span><span class=nx>snapRetainCount</span><span class=o>=</span><span class=mi>3</span>
</span></span><span class=line><span class=cl><span class=err>#</span> <span class=nx>Purge</span> <span class=nx>task</span> <span class=nx>interval</span> <span class=k>in</span> <span class=nx>hours</span>
</span></span><span class=line><span class=cl><span class=err>#</span> <span class=nx>Set</span> <span class=nx>to</span> <span class=s2>&#34;0&#34;</span> <span class=nx>to</span> <span class=nx>disable</span> <span class=nx>auto</span> <span class=nx>purge</span> <span class=nx>feature</span>
</span></span><span class=line><span class=cl><span class=err>#</span><span class=nx>autopurge</span><span class=p>.</span><span class=nx>purgeInterval</span><span class=o>=</span><span class=mi>1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>##</span> <span class=nx>Metrics</span> <span class=nx>Providers</span>
</span></span><span class=line><span class=cl><span class=err>#</span>
</span></span><span class=line><span class=cl><span class=err>#</span> <span class=nx>https</span><span class=o>:</span><span class=c1>//prometheus.io Metrics Exporter
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=err>#</span><span class=nx>metricsProvider</span><span class=p>.</span><span class=nx>className</span><span class=o>=</span><span class=nx>org</span><span class=p>.</span><span class=nx>apache</span><span class=p>.</span><span class=nx>zookeeper</span><span class=p>.</span><span class=nx>metrics</span><span class=p>.</span><span class=nx>prometheus</span><span class=p>.</span><span class=nx>PrometheusMetricsProvider</span>
</span></span><span class=line><span class=cl><span class=err>#</span><span class=nx>metricsProvider</span><span class=p>.</span><span class=nx>httpPort</span><span class=o>=</span><span class=mi>7000</span>
</span></span><span class=line><span class=cl><span class=err>#</span><span class=nx>metricsProvider</span><span class=p>.</span><span class=nx>exportJvmInfo</span><span class=o>=</span><span class=kc>true</span>
</span></span><span class=line><span class=cl><span class=nx>admin</span><span class=p>.</span><span class=nx>serverPort</span><span class=o>=</span><span class=mi>8888</span>
</span></span></code></pre></div><h2 id=启动broker>启动broker</h2><p>在<code>conf/broker.conf</code>配置文件中，将<code>metadataStoreUrl</code>改为上一步中启动的zk的地址<code>localhost:2181</code>，如下：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=err>#</span> <span class=nx>The</span> <span class=nx>metadata</span> <span class=nx>store</span> <span class=nx>URL</span>
</span></span><span class=line><span class=cl><span class=err>#</span> <span class=nx>Examples</span><span class=o>:</span>
</span></span><span class=line><span class=cl><span class=err>#</span> <span class=o>*</span> <span class=nx>zk</span><span class=o>:</span><span class=nx>my</span><span class=o>-</span><span class=nx>zk</span><span class=o>-</span><span class=mi>1</span><span class=o>:</span><span class=mi>2181</span><span class=p>,</span><span class=nx>my</span><span class=o>-</span><span class=nx>zk</span><span class=o>-</span><span class=mi>2</span><span class=o>:</span><span class=mi>2181</span><span class=p>,</span><span class=nx>my</span><span class=o>-</span><span class=nx>zk</span><span class=o>-</span><span class=mi>3</span><span class=o>:</span><span class=mi>2181</span>
</span></span><span class=line><span class=cl><span class=err>#</span> <span class=o>*</span> <span class=nx>my</span><span class=o>-</span><span class=nx>zk</span><span class=o>-</span><span class=mi>1</span><span class=o>:</span><span class=mi>2181</span><span class=p>,</span><span class=nx>my</span><span class=o>-</span><span class=nx>zk</span><span class=o>-</span><span class=mi>2</span><span class=o>:</span><span class=mi>2181</span><span class=p>,</span><span class=nx>my</span><span class=o>-</span><span class=nx>zk</span><span class=o>-</span><span class=mi>3</span><span class=o>:</span><span class=mi>2181</span> <span class=p>(</span><span class=nx>will</span> <span class=k>default</span> <span class=nx>to</span> <span class=nx>ZooKeeper</span> <span class=nx>when</span> <span class=nx>the</span> <span class=nx>schema</span> <span class=nx>is</span> <span class=nx>not</span> <span class=nx>specified</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=err>#</span> <span class=o>*</span> <span class=nx>zk</span><span class=o>:</span><span class=nx>my</span><span class=o>-</span><span class=nx>zk</span><span class=o>-</span><span class=mi>1</span><span class=o>:</span><span class=mi>2181</span><span class=p>,</span><span class=nx>my</span><span class=o>-</span><span class=nx>zk</span><span class=o>-</span><span class=mi>2</span><span class=o>:</span><span class=mi>2181</span><span class=p>,</span><span class=nx>my</span><span class=o>-</span><span class=nx>zk</span><span class=o>-</span><span class=mi>3</span><span class=o>:</span><span class=mi>2181</span><span class=o>/</span><span class=nx>my</span><span class=o>-</span><span class=nx>chroot</span><span class=o>-</span><span class=nx>path</span> <span class=p>(</span><span class=nx>to</span> <span class=nx>add</span> <span class=nx>a</span> <span class=nx>ZK</span> <span class=nx>chroot</span> <span class=nx>path</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nx>metadataStoreUrl</span><span class=o>=</span><span class=nx>zk</span><span class=o>:</span><span class=nx>localhost</span><span class=o>:</span><span class=mi>2181</span>
</span></span></code></pre></div></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>更新于 2022-05-27</span></div><div class=post-info-license></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw"></i>&nbsp;<a href=/tags/latex/>LaTex</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>返回</a></span>&nbsp;|&nbsp;<span><a href=/>主页</a></span></section></div><div class=post-nav><a href=/posts/pulsar_in_action_ch02/ class=prev rel=prev title="Apache Pulsar in Action第二章读书笔记"><i class="fas fa-angle-left fa-fw"></i>Apache Pulsar in Action第二章读书笔记</a></div></div><div id=comments><div id=utterances></div><noscript>Please enable JavaScript to view the comments powered by <a href=https://utteranc.es/>Utterances</a>.</noscript></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line>由 <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.99.1">Hugo</a> 强力驱动 | 主题 - <a href=https://github.com/dillonzq/LoveIt target=_blank rel="noopener noreffer" title="LoveIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw"></i> LoveIt</a></div><div class=footer-line><i class="far fa-copyright fa-fw"></i><span itemprop=copyrightYear>2022</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=/ target=_blank>boatrain</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title=回到顶部><i class="fas fa-arrow-up fa-fw"></i>
</a><a href=# id=view-comments class=fixed-button title=查看评论><i class="fas fa-comment fa-fw"></i></a></div><link rel=stylesheet href=/lib/lightgallery/lightgallery.min.css><link rel=stylesheet href=/lib/katex/katex.min.css><script type=text/javascript src=/lib/smooth-scroll/smooth-scroll.min.js></script><script type=text/javascript src=/lib/lazysizes/lazysizes.min.js></script><script type=text/javascript src=/lib/lightgallery/lightgallery.min.js></script><script type=text/javascript src=/lib/lightgallery/lg-thumbnail.min.js></script><script type=text/javascript src=/lib/lightgallery/lg-zoom.min.js></script><script type=text/javascript src=/lib/clipboard/clipboard.min.js></script><script type=text/javascript src=/lib/katex/katex.min.js></script><script type=text/javascript src=/lib/katex/auto-render.min.js></script><script type=text/javascript>window.config={code:{copyTitle:"复制到剪贴板",maxShownLines:10},comment:{utterances:{darkTheme:"github-dark",issueTerm:"pathname",label:"Comment",lightTheme:"github-light",repo:"boatrainlsz/blog-comment"}},lightGallery:{actualSize:!1,exThumbImage:"data-thumbnail",hideBarsDelay:2e3,selector:".lightgallery",speed:400,thumbContHeight:80,thumbWidth:80,thumbnail:!0},math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1}}</script><script type=text/javascript src=/js/theme.min.js></script><script type=text/javascript>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-SLGEHM7PTD")</script><script type=text/javascript src="https://www.googletagmanager.com/gtag/js?id=G-SLGEHM7PTD" async></script></body></html>